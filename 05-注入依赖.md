学习依赖注入之前，我们应该了解什么是依赖注入。

一个业务系统，由很多 bean 对象组成，bean 之间存在调用关系，那么这些 bean 对象是如何协同工作的呢？

 对象之间的调用，存在依赖关系，依赖对象的注入，称为依赖注入。



## 1、构造器注入

构造器注入 bean 子节点 constructor-arg 节点

可以使用 constructor-arg 节点属性  index，name，type

基本类型注入：使用 value

引用类型注入：使用 ref

### 1.1、构造方法参数的索引 index

~~~xml
<bean id="studentDao" class="com.tjetc.dao.StudentDao"></bean>
<bean id="studentService" class="com.tjetc.service.StudentService">
	<constructor-arg index="0" value="张三"></constructor-arg>
	<constructor-arg index="1" ref="studentDao"></constructor-arg>
</bean>
~~~

### 1.2、构造方法参数的名称 name

~~~xml
<bean id="studentDao" class="com.tjetc.dao.StudentDao"></bean>
<bean id="studentService" class="com.tjetc.service.StudentService">
	<constructor-arg name="name" value="张三2"></constructor-arg>
	<constructor-arg name="studentDao" ref="studentDao"></constructor-arg>
</bean>
~~~

### 1.3、构造方法参数的类型 type

~~~xml
<bean id="studentDao" class="com.tjetc.dao.StudentDao"></bean>
<bean id="studentService" class="com.tjetc.service.StudentService">
	<constructor-arg name="name" type="java.lang.String" value="张三2"></constructor-arg>
	<constructor-arg name="studentDao" ref="studentDao"></constructor-arg>
</bean>
~~~



## 2、属性 set 方法注入

使用 bean 类的属性的 set 方法注入属性值

1. bean 类添加属性的 setter 方法

2. 在 bean 的子节点 property
   * name：是 setXxx() 方法后单词的首字母变小写后的单词，不是属性名
   * value：代表的是值
   * ref：代表的是引用类型的 bean 的 id 的值

3. 测试

bean 对象：

~~~java
package com.tjetc.service;

import com.tjetc.dao.StudentDao;

public class StudentService {
	private String name;
	private StudentDao studentDao;

	public StudentService() {}

	public StudentService(String name, StudentDao studentDao) {
		System.out.println("StudentService(name,studentDao)构造方法...name="+name+",studentDao="+studentDao);
		this.name = name;
		this.studentDao = studentDao;
	}

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}

	public StudentDao getStudentDao() {
		return studentDao;
	}

	public void setStudentDao(StudentDao studentDao) {
		this.studentDao = studentDao;
	}
	
}
~~~

xml 配置：

~~~xml
<bean id="studentDao" class="com.tjetc.dao.StudentDao"></bean>
<bean id="studentService" class="com.tjetc.service.StudentService">
	<property name="name" value="李四"></property>
	<property name="studentDao" ref="studentDao"></property>
</bean>
~~~

Test 类

~~~java
public static void main(String[] args) {
    ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("applicationContext.xml");
    StudentService studentService = context.getBean(StudentService.class);
    System.out.println(studentService.getName());
    System.out.println(studentService.getStudentDao());
}
~~~





## 3、Set注入与构造器注入对比

1. Set 注入模式代码更加简洁

2. 构造器注入对依赖关系的表达更加清楚

3. Set 注入可以避免循环依赖问题



## 4、集合属性注入



### 4.1、List的数据

#### 4.1.1、基本类型语法

~~~xml
<property name="hobbies">
	<list>
		<value>吃</value>
		<value>喝</value>
		<value>玩</value>
		<value>乐</value>
		<value>读书</value>
	</list>
</property>
~~~

#### 4.1.2、引用类型语法

~~~xml
<property name="books">
	<list>
		<ref bean="book1"/>
		<ref bean="book2"/>
		<ref bean="book3"/>
	</list>
</property>
~~~



### 4.2、数组的数据

#### 4.2.1、基本类型语法

~~~xml
<property name="hobbies">
	<list>
		<value>吃</value>
		<value>喝</value>
		<value>玩</value>
		<value>乐</value>
		<value>读书</value>
	</list>
</property>
~~~

#### 4.2.2、引用类型语法

~~~xml
<property name="books">
	<list>
		<ref bean="book1"/>
		<ref bean="book2"/>
		<ref bean="book3"/>
	</list>
</property>
~~~



### 4.3、Set的数据





















